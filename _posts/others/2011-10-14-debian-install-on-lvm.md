---
layout: post
title: Установка Debian на LVM
---

Если вы уже определились с выбором вашего
[любимого дистрибутива Linux](http://www.debian.org/), то настало
время выбрать разметку диска и установить на него Debian. Вопрос не
столько в том, как подобрать размеры разделов, избежав как их
переполнения, так и неоправданно много пустующего места. Нельзя
исключать ситуаций, когда по тем или иным причинам придётся менять
разделы на забочем Linux, что может доставить массу хлопот.

Если нет желания проходить через изменение и перенос разделов, то
самое время подумать об установке системы на
[LVM](http://ru.wikipedia.org/wiki/LVM) (*Logical Volume
Manager*). LVM представляет собой абстракцию над обычными разделами
--- логические тома, изменять которые можно, не отрываясь от работы в
Linux. Для установки нам понадобится чистый раздел диска и один из
установочных дисков Debian. Желательно к этому моменту иметь опыт
установки Linux, поскольку всё описанное --- только мой личный опыт,
и, по понятным причинам, *никаких гарантий при неправильной установке
я дать не могу*.

### В начале установки

Убедитесь, что к компьютеру подключены только те диски, которые будут
использоваться в дальнейшем (это позволит инсталлятору правильно
настроить загрузчик GRUB2), и загружайтесь с установочного диска. В
качестве последнего я выбрал CD для сетевой установки
[netinst](http://www.debian.org/CD/netinst/) с Debian Squeeze на
борту, для Debian доступны и [другие диски](http://www.debian.org/CD),
установка с которых не должна сильно отличаться. После выбора в меню
"GUI Install", вам будет предложено пройти стандартные шаги установки,
которые достаточно подробно освещены
[здесь](http://mydebianblog.blogspot.com/2006/08/in-true-debian-way.html). Порадовало,
что сразу можно настроить как интернет (при установке с netinst часть
пакетов скачивается из интернета), так и русскую локаль с раскладкой.

В разделе **<<Разметка диска>>** выбираем *Вручную*, и далее ---
*Настройка менеджера логических томов (LVM)*:

![](/images/others/partman_choose_partition_0.png){:.aligncenter}

### Настройка менеджера логических томов

Перед настройкой LVM желательно знать о трёх его составляющих:

* Логический том (англ. *logical volume*) — аналогичен разделу (hda1,
sdb3, etc) на не-LVM системах. Так же, как и на них, представляется
как блочное устройство и может нести файловую систему.
* Физический том (англ. *physical volume*) — устройство,
представляющееся системе как один диск (жесткий диск или его раздел,
RAID-массив).
* Группа томов (англ. *volume group*) — набор физических томов в один
объект.

Настройка начинается с создания группы томов:

![](/images/others/partman-lvm_mainmenu_0.png){:.aligncenter}

Под группу томов **<<debian>>** мною отведён весь диск **sda**. Вы
можете использовать свои названия групп и в любом сочетании с
имеющимися дисками и разделами. Учтите, что после записи изменений на
диск, вся информация на нём будет потеряна.

### Создание логических томов

![](/images/others/partman-lvm_mainmenu_1.png){:.aligncenter}

Это оответствует созданию обычных разделов, среди которых у нас будут

* swap-раздел (если планируете использовать гибернацию, то раздел
должен быть немного больше размера оперативной памяти);
* корневой раздел на 10ГБ;
* оставшееся пространство отдано под домашнюю директорию /home.

На деле, размеры томов надо сделать побольше, поскольку 7%
пространства пойдёт на нужды LVM.

![](/images/others/partman_choose_partition_1.png){:.aligncenter}

  


**Общие впечатления**: установка Debian прошла на удивление гладко, с
удобной настройкой LVM и полной поддержкой русского в терминале.
