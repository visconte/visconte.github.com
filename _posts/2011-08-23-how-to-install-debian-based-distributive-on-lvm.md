---
layout: post
title: Установка Debian-based дистрибутивов на LVM
commentIssueId: 1
---

Скажем, вы только что приобрели новый жёсткий диск и горите желанием
установить на него свой любимый
[Debian-based дистрибутив](http://www.debian.org/misc/children-distros.ru.html). Прежде
всего, вам предстоит разбить диск на разделы. Если разметка диска
выбрана неверно, то часть разделов будет пустовать, а на других со
временем обнаружится нехватка свободного места. Как выход из данной
ситуации, можно отдать часть рабочего пространства диска под
[LVM](http://en.wikipedia.org/wiki/Logical_Volume_Manager_%28Linux%29)
(*Менеджер логических томов*) и работать не с разделами, а с
логическими томами, размер которых легко поддаётся изменению.

### Создание таблицы разделов

Создадим на новом диске следующие разделы:

* /boot (64MB);

* swap-раздел (если планируете использовать гибернацию, то раздел
должен быть немного больше размера оперативной памяти);

* оставшееся пространство отдадим под LVM.

Воспользуемся утилитой `fdisk`, которая есть в любом дистрибутиве
Linux. Загружаемся с LiveCD и входим в интерактивный режим, выполнив
команду `fdisk /путь/к/диску`:

1. Нажимаем `n`, чтобы создать новый раздел на диске, далее, `p`
(создать первичный раздел) и выбираем номер раздела.

2. На предложение выбрать начало раздела нажимаем `Enter`: новый
раздел начнётся со следующего сектора. Затем нужно задать окончание
или размер нового раздела. Размер лучше задать в секторах (единицы
измерения при этом не указываются), чтобы последний сектор раздела был
полностью заполнен (размер сектора есть в выводе команды `fdisk -l
/путь/к/диску`).

3. Изменим тип 3-го раздела с обычного Linux-раздела (0x83) на LVM
(0x8e). Введём `t`, затем --- номер раздела. Вводим `8e`, чтобы
изменить тип раздела на LVM (список поддерживаемых разделов можно
посмотреть, нажав `L`).

4. После того, как все разделы созданы, нажимаем `p` для просмотра
таблицы разделов. Если всё устраивает --- нажимаем `w`, и таблица
разделов будет создана (выход из интерактивного режима без изменений
осуществляется по нажатию `q`).

Вот пример полученной таблицы разделов:

{% highlight bash %}
root@vovchik:/home/user# fdisk -l /dev/sdb

Диск /dev/sdb: 320.1 ГБ, 320072933376 байт
255 heads, 63 sectors/track, 38913 cylinders
Units = цилиндры of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x0004453e

Устр-во Загр     Начало       Конец       Блоки   Id  Система
{% endhighlight %}

{% highlight console %}
root@vovchik:/home/user# fdisk -l /dev/sdb

Диск /dev/sdb: 320.1 ГБ, 320072933376 байт
255 heads, 63 sectors/track, 38913 cylinders
Units = цилиндры of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x0004453e

Устр-во Загр     Начало       Конец       Блоки   Id  Система
{% endhighlight %}

### Создание логических томов

Всё необходимые пакеты мы доустановим в процессе, и начнём со
следующего

{% highlight bash %}
apt-get install lvm2
{% endhighlight %}

При подготовке статьи использовались следующие источники:

* [OpenNET: Разбиение дисков и инсталляция Linux на LVM](http://www.opennet.ru/base/sys/lvm_install.txt.html)

* [Arch Linux Wiki: LVM (Русский)](https://wiki.archlinux.org/index.php/LVM_%28%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9%29)
  
* [Arch Linux: LVM](http://www.altlinux.org/LVM)

* [How To Create Linux LVM In 3 Minutes](http://www.walkernews.net/2007/07/02/how-to-create-linux-lvm-in-3-minutes/)
